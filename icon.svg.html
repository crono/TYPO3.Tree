<!DOCTYPE html>
<!-- saved from url=(0025)http://dev.dfau/pagetree/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link type="text/css" rel="stylesheet" href="./icon.svg_files/style.css">
  <script type="text/javascript" src="./icon.svg_files/d3.js"></script>
</head>
<body>
<div id="body">
<svg height="680"><g transform="translate(8,10)"><g class="links"><path class="link" d="M0 0 V20 H16" style="opacity: 1;"></path><path class="link" d="M0 0 V200 H16" style="opacity: 1;"></path><path class="link" d="M16 20 V40 H32" style="opacity: 1;"></path><path class="link" d="M16 20 V140 H32" style="opacity: 1;"></path><path class="link" d="M32 40 V60 H48" style="opacity: 1;"></path><path class="link" d="M32 40 V80 H48" style="opacity: 1;"></path><path class="link" d="M32 40 V100 H48" style="opacity: 1;"></path><path class="link" d="M32 40 V120 H48" style="opacity: 1;"></path><path class="link" d="M32 140 V160 H48" style="opacity: 1;"></path><path class="link" d="M32 140 V180 H48" style="opacity: 1;"></path><path class="link" d="M16 200 V220 H32" style="opacity: 1;"></path><path class="link" d="M16 200 V580 H32" style="opacity: 1;"></path><path class="link" d="M32 220 V240 H48" style="opacity: 1;"></path><path class="link" d="M32 220 V440 H48" style="opacity: 1;"></path><path class="link" d="M48 240 V260 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V280 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V300 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V320 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V380 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V400 H64" style="opacity: 1;"></path><path class="link" d="M48 240 V420 H64" style="opacity: 1;"></path><path class="link" d="M64 320 V340 H80" style="opacity: 1;"></path><path class="link" d="M64 320 V360 H80" style="opacity: 1;"></path><path class="link" d="M48 440 V460 H64" style="opacity: 1;"></path><path class="link" d="M48 440 V480 H64" style="opacity: 1;"></path><path class="link" d="M48 440 V500 H64" style="opacity: 1;"></path><path class="link" d="M48 440 V520 H64" style="opacity: 1;"></path><path class="link" d="M48 440 V540 H64" style="opacity: 1;"></path><path class="link" d="M48 440 V560 H64" style="opacity: 1;"></path><path class="link" d="M32 580 V600 H48" style="opacity: 1;"></path><path class="link" d="M32 580 V640 H48" style="opacity: 1;"></path><path class="link" d="M48 600 V620 H64" style="opacity: 1;"></path><path class="link" d="M48 640 V660 H64" style="opacity: 1;"></path></g><g class="nodes"><g class="node" transform="translate(0,0)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Root</text></g><g class="node" transform="translate(16,20)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Interactive tools</text></g><g class="node" transform="translate(32,40)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Browser-based</text></g><g class="node" transform="translate(48,60)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Datawrapper</text></g><g class="node" transform="translate(48,80)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Google Sheets</text></g><g class="node" transform="translate(48,100)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">plotly</text></g><g class="node" transform="translate(48,120)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">RAW</text></g><g class="node" transform="translate(32,140)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Desktop</text></g><g class="node" transform="translate(48,160)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Tableau Desktop</text></g><g class="node" transform="translate(48,180)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Tableau Public</text></g><g class="node" transform="translate(16,200)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Coding</text></g><g class="node" transform="translate(32,220)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">JavaScript</text></g><g class="node" transform="translate(48,240)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Charting libraries</text></g><g class="node" transform="translate(64,260)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Google Charts</text></g><g class="node" transform="translate(64,280)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">HighCharts</text></g><g class="node" transform="translate(64,300)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">InfoVis</text></g><g class="node" transform="translate(64,320)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Mapping</text></g><g class="node" transform="translate(80,340)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Kartograph</text></g><g class="node" transform="translate(80,360)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Leaflet</text></g><g class="node" transform="translate(64,380)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">MetricsGraphics.js</text></g><g class="node" transform="translate(64,400)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">NVD3</text></g><g class="node" transform="translate(64,420)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Sigma</text></g><g class="node" transform="translate(48,440)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Custom coded</text></g><g class="node" transform="translate(64,460)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">D3</text></g><g class="node" transform="translate(64,480)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Ractive</text></g><g class="node" transform="translate(64,500)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Raphaël</text></g><g class="node" transform="translate(64,520)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Snap.svg</text></g><g class="node" transform="translate(64,540)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Variance</text></g><g class="node" transform="translate(64,560)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Vega</text></g><g class="node" transform="translate(32,580)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Other</text></g><g class="node" transform="translate(48,600)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Python</text></g><g class="node" transform="translate(48,640)" style="opacity: 1;"><path class="chevron" d="M 0 0 L 9 5 L 0 10 Z" transform="translate(5 -4) rotate(90)"></path><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">R</text></g><g class="node" transform="translate(64,660)" style="opacity: 1;"><image href="http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg" width="16" height="16" x="8" y="-8"></image><text dx="27" dy="5">Shiny</text></g></g></g></svg></div>
<script type="text/javascript">
  "use strict";

  var nodeHeight = 20;
  var indentWidth = 16;
  var duration = 400;
  var tree = d3.layout.tree();
  var svg = d3
      .select("#body")
      .append("svg");
  var container = svg
      .append("g")
      .attr("transform", "translate(" + (indentWidth / 2)  + "," + (nodeHeight / 2) + ")");
  var linkElements = container.append('g')
      .attr('class', 'links');
  var nodeElements = container.append('g')
      .attr('class', 'nodes');
  var root = null;

  d3.json("data.json", function (error, flare) {
    if (error) throw error;
    update(root = flare);
  });

  function squaredDiagonal(d) {
    var path = [];
    path.push('M' + d.source.x + " " + d.source.y);
    path.push('V' + d.target.y);
    path.push('H' + d.target.x);
    return path.join(' ');
  }

  function xy(d) {
    return "translate(" + d.x + "," + d.y + ")";
  }

  function update(root) {
    var data = {};
    data.nodes = tree.nodes(root);
    data.links = tree.links(data.nodes);

    data.nodes.forEach(function(n, i) {
      n.hasChildren = n.children ? 1 : 0;
      n.x = n.depth * indentWidth;
      n.y = i * nodeHeight;
    });

    svg.attr('height', data.nodes.length * nodeHeight);

    var links = linkElements
        .selectAll(".link")
        .data(data.links, function(d) { return d.source.identifier + '|' + d.target.identifier; });

    // update
    links
        .transition()
        .duration(duration)
        .attr("d", squaredDiagonal);

    // create
    links
        .enter()
        .append("path")
        .style('opacity', 0)
        .attr("class", "link")
        .attr("d", squaredDiagonal)
        .transition()
        .duration(duration)
        .style('opacity', 1);

    // delete
    links
        .exit()
        .transition()
        .duration(duration)
        .style('opacity', 0)
        .remove();

    var nodes = nodeElements
        .selectAll(".node")
        .data(data.nodes, function(d) { return d.identifier; });

    // update
    nodes
        .transition()
        .duration(duration)
        .attr("transform", xy);

    nodes
        .selectAll('.chevron')
        .filter(function(d) { return !d.children; })
        .transition()
        .duration(duration)
        .attr("transform", 'translate(-4 -5) rotate(0)');

    nodes
        .selectAll('.chevron')
        .filter(function(d) { return d.children; })
        .transition()
        .duration(duration)
        .attr("transform", 'translate(5 -4) rotate(90)');

    // create
    var nodeEnter = nodes
        .enter()
        .append("g")
        .style('opacity', 0)
        .attr("class", "node")
        .attr("transform", xy);
    nodeEnter
        .filter(function(d) { return d.hasChildren })
        .append('path')
        .attr('class', 'chevron')
        .attr('d', 'M 0 0 L 9 5 L 0 10 Z')
        .attr("transform", 'translate(5 -4) rotate(90)')
        .on("click", click);
    nodeEnter
        .append('svg:image')
        .attr('xlink:href', 'http://introductionpackage.dev.dfau/typo3/sysext/core/Resources/Public/Icons/T3Icons/apps/apps-pagetree-page-default.svg')
        .attr('width', '16')
        .attr('height', '16')
        .attr("x", "8")
        .attr("y", "-8");
    nodeEnter
        .append("text")
        .attr("dx", "27")
        .attr("dy", "5")
        .text(function(d) { return d.name; });
    nodeEnter
        .transition()
        .duration(duration)
        .style('opacity', 1);

    // delete
    nodes
        .exit()
        .transition()
        .duration(duration)
        .style('opacity', 0)
        .remove();
  }

  function hideChildren(d) {
    if (d.children === undefined) {
      return;
    }
    d._children = d.children;
    d.children = null;
  }

  function showChildren(d) {
    if (d._children === undefined) {
      return;
    }
    d.children = d._children;
    d._children = null;
  }

  function click(d) {
    console.log(d.name);
    if (d.children) {
      hideChildren(d);
    } else {
      showChildren(d);
    }
    update(root);
  }
</script>


</body></html>